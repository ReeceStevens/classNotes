# EE 461 Lecture -- 9.1.16

## Overview for Today

- Pipes

- Basic I/O

- Signals

## Fun Utilities

- `script`: set a session script that records the bash commands

```
$ script --timing=t9-1.txt -s s9-1.txt
```

To replay a saved script (pauses and all):

```
$ scriptreplay -d 1.0 -m 1 --timing=t9-1.txt -s s9-1.txt
```

Dr. Yerraballi will try to post all of his shell sessions as scripts
so we can replay and study them.

- `man 2` is the Linux programmer's manual (man pages for system programming)


## I/O

Fundamental operations:

    - `open`

    ```c
    int fd = open("foo.txt", O-CREAT);
    ```

    - `read`

    - `write`

    ```c
    write(fd, "Hi", 2); // prints to fd
    write(1, "Hi", 2); // Prints to stdout (the screen)
    ```

    - `close`

    ```c
    close(1);
    ```

Files are accessed through two mechanisms:

    - File descriptors (`int`)

        - Preset file descriptors:

            - `0`: standard input

            - `1`: standard output

            - `2`: standard error

    - File pointer (`FILE`)

In the process control block, there is a list of open files. Entries
0-2 are prefilled with `stdin`, `stdout`, and `stderr`.


## Redirection inside a C program

`open` returns the first open file descriptor. So, if we close STDOUT...

```c
const int STDOUT_FILENO = 1;
close(STDOUT_FILENO);
open('other_file.txt', ...options); // Now, STDOUT is redirected to other_file.txt
```
